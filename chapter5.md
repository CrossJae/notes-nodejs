## 内存控制

1. 内存泄漏：在早期版本中IE与DOM交互时发生的问题。
2. 无阻塞、事件驱动的node服务，具有内存消耗低的优点，适合处理海量的网络请求。
3. 内存控制，是海量请求 + 长时间运行的前提下进行探讨的
  * 海量请求：在服务端，资源寸土寸金，为海量用户服务，就要高效循环利用。
  * 长时间运行：对比浏览器中，网页应用基本都是运行事件很短的，进程退出，内存会释放。
4. 在服务端，内存管理的好坏，垃圾回收状况是否优良，都会对服务构成影响。
5. Node的js执行引擎V8
  1. Node是构建在Chrome的js运行时上的平台
  2. 内存限制：一般后端语言内存没什么限制，在node中，只能使用部分内存，源于v8对内存的限制
  3. 对象分配：在V8中所有js对象都通过堆来进行分配。
  4. v8提供选项可以使用更多内存`--max-old-space-size`或`--max-new-space-size`
  5. 垃圾回收机制：
    * 主要策略：分代式垃圾回收机制
    * 内存分代：
      1. 新生代：存活时间较短
      2. 老生代：存活时间较长、常驻内存的对象
    * Scavenge算法（新生代中的对象垃圾回收方法）
      * 在Scavenge算法实现中主要使用了Cheney算法，Cheney算法主要采用复制的方式实现垃圾回收，它将内存一分为二，每部分空间成为semispace，通过将存活对象在两个semispace之间进行复制来实现。
      * 缺点：只能使用对内存中的一半
      * 优点：时间效率很高
      * 典型的牺牲空间换取时间
      * 一个对象多次复制依然存活，就被提升到老生代中，这个过程叫 *晋升*


*-end-*
